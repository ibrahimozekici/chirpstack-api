syntax = "proto3";
package api;


option go_package = "github.com/ibrahimozekici/chirpstack-api/go/v4/as/external/api";
option java_package = "io.chirpstack.api.as.external.api";

import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";


// Landing service provides necessery data for landing page
service LandingService {
    // Get returns the landing data
    rpc GetLanding(WhoAreYouParams) returns (GetLandingResponse) {
        option (google.api.http) ={
            get: "/api/landing"
        };
    }
}


message WhoAreYouParams {}
// message GetLandingRequest {
//      // Max number of devices to return in the result-set.
//      int64 limit = 1;
// }

message GetLandingResponse {
    // User ID.
	// Will be set automatically on create.
	int64 id = 1;
    
    // E-mail of the user.
    string email = 2;
    
    //  Organization List
    // repeated LandingOrganization organizations = 3 [json_name = "organizations"];
    LandingOrganizationList organizationList = 3;
}

message LandingOrganizationList {
    repeated LandingOrganization organizations = 3 [json_name = "organizations"];
}

message LandingOrganization {
    // Organization ID.
	int64 organization_id = 1 [json_name = "organization_id"];
	
	// Organization name.
	string organization_name = 2 [json_name = "organization_name"];

	// Organization display name.
    string organization_display_name = 3 [json_name = "organization_display_name"];
    
    // Organization Applications
    repeated LandingApplication applications = 4 [json_name = "applications"];
}

message LandingApplication {
    // Application ID.
    int64 application_id = 1 [json_name = "application_id"];

    // Name of the application.
    string application_name = 2 [json_name = "application_name"];

    // Description of the application.
    string application_description = 3 [json_name = "application_description"];

    // service_profile_id
    string service_profile_id = 4 [json_name = "service_profile_id"];

    // ID of the organization to which the application belongs.
    repeated LandingDevice devices = 5 [json_name = "devices"];
}

message LandingDevice {
    // Device EUI (HEX encoded).
    string device_dev_eui = 1 [json_name = "device_dev_eui"]; 
    
    // device_created_at
    string device_created_at = 2 [json_name = "device_created_at"];

    // device_updated_at
    string device_updated_at = 3 [json_name = "device_updated_at"];

    // Device-profile ID attached to the device.
    string device_profile_id = 4 [json_name = "device_profile_id"];

    // Name of the device.
    string device_name = 5 [json_name = "device_name"];
 
    // Description of the device.
    string device_description = 6 [json_name = "device_description"];

    // device_last_seen_at
    string device_last_seen_at = 7 [json_name = "device_last_seen_at"];

    // data time
    int64 device_data_time = 8 [json_name = "device_data_time"];

    // device lat value
    double device_lat = 9 [json_name = "device_lat"];

    // device lng value
    double device_lng = 10 [json_name = "device_lng"];
}